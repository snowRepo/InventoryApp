<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:InventoryApp.ViewModels"
             xmlns:conv="using:InventoryApp.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="InventoryApp.Views.ExternalSurfacesView"
             x:DataType="vm:ExternalSurfacesViewModel">
    
    <UserControl.Resources>
        <conv:BoolToBrushConverter x:Key="BoolToBrush"/>
    </UserControl.Resources>
    
    <Grid RowDefinitions="Auto,Auto,Auto,*" ColumnDefinitions="*">
        <!-- Header -->
        <StackPanel Grid.Row="0" Spacing="8">
            <TextBlock Text="External Surfaces" FontSize="24" FontWeight="Bold"/>
            <Border Height="1" Background="#E0E0E0" Margin="0,0,0,8"/>
        </StackPanel>
        
        <!-- Device Status -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center" Margin="0,0,0,16">
            <TextBlock Text="Device:" FontWeight="SemiBold" VerticalAlignment="Center"/>
            <TextBlock Text="{Binding DeviceName}" VerticalAlignment="Center" FontWeight="SemiBold"/>
            <Border Width="12" Height="12" CornerRadius="6" 
                    VerticalAlignment="Center"
                    Margin="8,0,0,0"
                    Background="{Binding IsDeviceAvailable, Converter={StaticResource BoolToBrush}, ConverterParameter='#4CAF50|#F44336'}" 
                    ToolTip.Tip="{Binding DeviceStatusText}"/>
            <TextBlock Text="{Binding DeviceStatusText}" VerticalAlignment="Center" Margin="4,0,0,0"/>
            <Button Content="Refresh" 
                    Command="{Binding CheckDeviceStatusCommand}"
                    Margin="20,0,0,0"
                    Padding="12,4"
                    VerticalAlignment="Center"
                    IsEnabled="{Binding !IsBusy}"/>
            <Button Content="Get Info"
                    Command="{Binding GetDeviceInfoCommand}"
                    Margin="8,0,0,0"
                    Padding="12,4"
                    VerticalAlignment="Center"
                    IsEnabled="{Binding IsDeviceAvailable, Mode=OneWay}"/>
        </StackPanel>

        <!-- Device Management -->
        <StackPanel Grid.Row="2" Spacing="12" Margin="0,0,0,16">
            <TextBlock Text="Device Management" FontSize="16" FontWeight="SemiBold"/>
            <StackPanel Orientation="Horizontal" Spacing="12">
                <Button Content="Scan for Devices" 
                        Command="{Binding ScanForDevicesCommand}"
                        IsEnabled="{Binding !IsBusy}"
                        Padding="12,4"
                        MinWidth="120"/>
                <Button Content="Connect"
                        Command="{Binding ConnectDeviceCommand}"
                        IsEnabled="{Binding !IsDeviceAvailable, Mode=OneWay}"
                        IsVisible="{Binding !IsDeviceAvailable, Mode=OneWay}"
                        Padding="12,4"
                        MinWidth="100"/>
                <Button Content="Disconnect"
                        Command="{Binding DisconnectDeviceCommand}"
                        IsEnabled="{Binding IsDeviceAvailable, Mode=OneWay}"
                        IsVisible="{Binding IsDeviceAvailable, Mode=OneWay}"
                        Padding="12,4"
                        MinWidth="100"/>
            </StackPanel>
        </StackPanel>

        <!-- Content Area -->
        <Grid Grid.Row="3" Margin="0,16,0,0">
            <Border Background="#FAFAFA" CornerRadius="4" BorderThickness="1" BorderBrush="#E0E0E0">
                <Grid>
                    <TextBlock Text="Device Console" 
                               FontSize="16" 
                               FontWeight="SemiBold"
                               Margin="12"/>
                    <ScrollViewer Margin="0,40,0,0" Padding="12">
                        <TextBlock Text="{Binding ConsoleOutput}" 
                                   TextWrapping="Wrap"/>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>
